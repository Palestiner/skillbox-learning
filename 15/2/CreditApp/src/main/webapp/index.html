<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Форма заявки на кредит</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css">
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script>
    // When the user clicks on div, open the popup
    function showPopup() {
      var popup = document.getElementById("privacyAgreementPopup");
      popup.classList.toggle("show");
    }

    function submitForm() {
      var keyValuePairs = {};
      $("#requestForm")
        .serializeArray()
        .forEach(function (element) {
          keyValuePairs[element.name] = element.value;
        });
      keyValuePairs["isSalaryProject"] = (keyValuePairs["isSalaryProject"] === "true");
      keyValuePairs["isTrustedClient"] = (keyValuePairs["isTrustedClient"] === "true");
      keyValuePairs["isRetiree"] = (keyValuePairs["isRetiree"] === "true");
      keyValuePairs["creditSum"] = parseInt(keyValuePairs["creditSum"], 10);
      keyValuePairs["creditTerm"] = parseInt(keyValuePairs["creditTerm"], 10);
      keyValuePairs["isPrivacyAccepted"] = (keyValuePairs["isPrivacyAccepted"] === "true");

      $.ajax({
        type: "POST",
        url: "/decision",
        data: JSON.stringify(keyValuePairs),
        contentType: "application/json; charset=utf-8",
        dataType: "text",
        success: function () {
          window.location.href = "/decision";
        },
        failure: function (errMsg) {
          alert(errMsg);
        }
      });
    }

  </script>
</head>
<body class="b-container">

<form class="w3-container w3-card-4 w3-light-grey w3-text-blue auto-margin form-size" id="requestForm"
      action="javascript:submitForm()">
  <h2 class="w3-center">Заявка на кредит</h2>

  <div class="w3-row w3-section">
    <div class="w3-panel w3-border-bottom w3-border-blue">
      <p>Параметры кредита</p>
    </div>
  </div>
  <div class="w3-row w3-half">
    <input name="isSalaryProject" class="w3-check" type="checkbox" value="true">
    <label>Есть зарплатная карта нашего Банка</label>
    <br>
    <input name="isTrustedClient" class="w3-check" type="checkbox" value="true">
    <label>Уже был кредит в нашем Банке</label>
  </div>
  <div class="w3-row w3-half">
    <br>
    <input name="isRetiree" class="w3-check" type="checkbox" value="true">
    <label>Я - пенсионер</label>
    <br><br>
  </div>

  <div class="w3-row w3-section w3-half">
    Сумма кредита, руб:
    <output name="creditSum" id="outputSum">1500000</output>
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fas fa-ruble-sign"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border" id="inputSum" min="50000" max="5000000" step="50000" value="1500000"
             style="width: 90%;" name="creditSum" type="range" oninput="outputSum.value = inputSum.value">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    Срок кредита, мес:
    <output name="creditTerm" id="outputTerm">12</output>
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge far fa-clock"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border" id="inputTerm" min="6" max="360" step="6" value="12"
             style="width: 90%;" name="creditTerm" type="range" oninput="outputTerm.value = inputTerm.value">
    </div>
  </div>

  <div class="w3-row w3-section">
    <div class="w3-panel w3-border-bottom w3-border-blue">
      <p>Общая информация о заемщике</p>
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fa fa-user"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="lastName" type="text"
             required pattern="[A-Za-zА-Яа-яЁё]{1,50}" placeholder="Фамилия">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fa fa-user"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="firstName" type="text"
             required pattern="[A-Za-zА-Яа-яЁё]{1,50}" placeholder="Имя">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fa fa-user"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="middleName" type="text"
             pattern="[A-Za-zА-Яа-яЁё]{1,50}" placeholder="Отчество">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fas fa-birthday-cake"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" required name="birthday" type="date">
      Дата рождения
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fa fa-envelope"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" id="email" name="email" type="email"
             required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" placeholder="Электронная почта">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fa fa-phone"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="phone" type="tel"
             required pattern="^((\+7|7|8)+([0-9]){10})$" placeholder="Мобильный телефон">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fas fa-venus-mars"></i></div>
    <div class="w3-rest">
      <select class="w3-input w3-border downsize" required name="gender">
        <option value="male">Мужской</option>
        <option value="female">Женский</option>
      </select>
      Пол
    </div>
  </div>

  <div class="w3-row w3-section">
    <div class="w3-panel w3-border-bottom w3-border-blue">
      <p>Паспорт</p>
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge far fa-id-card"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="passportSeries" type="text"
             required pattern="[0-9]{4}" placeholder="Серия">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge far fa-id-card"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="passportNumber" type="text"
             required pattern="[0-9]{6}" placeholder="Номер">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge far fa-calendar-alt"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="passportDateOfIssue" type="date"
             required>
      Дата выдачи
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge far fa-building"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="passportCode" type="text"
             required pattern="[0-9]{3}" placeholder="Код подразделения">
    </div>
  </div>

  <div class="w3-row w3-section">
    <div class="w3-panel w3-border-bottom w3-border-blue">
      <p>Адрес по месту постоянной регистрации</p>
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fas fa-city"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" id="city" name="city" type="text"
             required pattern="[A-Za-zА-Яа-яЁё0-9]{3,50}" placeholder="Город">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fas fa-road"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="street" type="text"
             required pattern="[A-Za-zА-Яа-яЁё0-9.,\s]{3,50}" placeholder="Улица">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge far fa-building"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="address" type="text"
             required pattern="[A-Za-zА-Яа-яЁё0-9.,\s]{1,8}" placeholder="Дом">
    </div>
  </div>

  <div class="w3-row w3-section w3-half">
    <div class="w3-col" style="width:50px"><i class="w3-xxlarge fas fa-door-closed"></i></div>
    <div class="w3-rest">
      <input class="w3-input w3-border downsize" name="flat" type="text"
             required pattern="[A-Za-zА-Яа-яЁё0-9.,\s]{1,8}" placeholder="Квартира">
    </div>
  </div>

  <div class="w3-row w3-section">
    <div class="w3-panel w3-border-bottom w3-border-blue">
      <p>Подтверждение</p>
    </div>
  </div>

  <button class="w3-button w3-block w3-section w3-blue w3-ripple w3-padding send-button" type="submit">
    Отправить заявку
  </button>

  <div class="w3-half">
    <input id="isPrivacyAccepted" name="isPrivacyAccepted" required class="w3-check" type="checkbox" value="true">
    <div class="popup downsize" onclick="showPopup()">Я согласен с <u>политикой обработки и хранения персональных
      данных</u>
      <span class="popuptext" id="privacyAgreementPopup">
        <p>
          В соответствии с Федеральным законом от 27.07.2006 № 152-ФЗ «О персональных данных», я даю банку (далее Банк)
          согласие на обработку моих персональных данных и подтверждаю, что, давая такое согласие, я действую свободно,
          своей волей, в своем интересе и на безвозмездной основе.
        </p>
        <p>
          Также даю свое согласие Оператору связи на обработку (сбор, запись, систематизация, накопление, хранение,
          уточнение (обновление, изменение), извлечение, использование, передача (предоставление, доступ), обезличивание,
          блокирование, удаление, уничтожение), в том числе автоматизированную, неавтоматизированную и смешанную, моих
          персональных данных – cведений об абоненте, имеющихся в распоряжении Оператора связи, и/или сведений о клиенте,
          предоставленных Оператору связи с моего согласия Банком, для передачи результата обработки указанной
          информации Банку.
        </p>
        <p>
          Перечень персональных данных, подлежащих обработке, отражён в регистрационной форме, и в том числе содержит
          следующие персональные данные:<br>
          <ul>
            <li>
            <li>фамилия, имя, отчество;</li>
            <li>дата и место рождения;</li>
            <li>гражданство;</li>
            <li>пол;</li>
            <li>адрес места жительства, места регистрации, адрес для корреспонденции;</li>
            <li>номера городских и мобильных телефонов, адреса электронной почты;</li>
            <li>паспортные данные;</li>
            <li>семейное, социальное, имущественное положение;</li>
            <li>образование;</li>
            <li>профессия;</li>
            <li>доходы;</li>
            <li>другая информация, относящаяся к моей личности.</li>
          </ul>

        </p>
        <p>
          Согласие дается мною для целей заключения с Банком любых договоров и их дальнейшего исполнения, принятия
          решений или совершения иных действий, порождающих юридические последствия в отношении меня или других лиц,
          в том числе при уступке банком прав требований по заключенному договору, предоставления мне информации об
          оказываемых Банком услугах, а также в целях осуществления возложенных на Банк функций в соответствии с
          действующим законодательством Российской Федерации.
        </p>
        <p>
          Указанные мною персональные данные предоставляются также в целях разработки Банком новых продуктов и
          услуг и информирования меня об этих продуктах и услугах. Банк может проверить достоверность предоставленных
          мною персональных данных.
        </p>
        <p>
          Согласие предоставляется на осуществление любых действий в отношении персональных данных, которые
          необходимы для достижения вышеуказанных целей, включая без ограничения: сбор, систематизацию, накопление,
          хранение, уточнение (обновление, изменение), использование, распространение (в том числе передача),
          обезличивание, блокирование, уничтожение, а также осуществление любых иных действий с персональными
          данными в соответствии с действующим законодательством.
        </p>
        <p>
          Обработка персональных данных осуществляется Банком следующими способами:
          <ul>
        <li>обработка персональных данных с использованием средств автоматизации;</li>
        <li>обработка персональных данных без использования средств автоматизации (неавтоматизированная обработка).</li>
      </ul>
        </p>
        <p>
          При обработке персональных данных Банк не ограничен в применении способов их обработки.<br>
          Настоящим я признаю и подтверждаю, что в случае необходимости предоставления персональных данных для
          достижения указанных выше целей третьему лицу, а равно как при привлечении третьих лиц к оказанию услуг в
          указанных целях, передачи Банком принадлежащих ему функций и полномочий иному лицу, Банк вправе в необходимом
          объеме раскрывать для совершения вышеуказанных действий информацию обо мне лично (включая мои персональные
          данные) таким третьим лицам, их агентам и иным уполномоченным ими лицам, а также предоставлять таким лицам
          соответствующие документы, содержащие такую информацию.<br>
          Настоящее согласие дается до истечения сроков хранения персональных данных или документов, содержащих
          персональные данные, определяемых в соответствии с законодательством Российской Федерации и внутренними
          документами Банка, либо 30 (тридцать) дней с даты принятия Банком решения об отказе в заключении договора.
          Согласие может быть отозвано путем направления в Банк письменного уведомления об отзыве согласия заказным
          письмом с уведомлением о вручении, либо путем личного вручения уполномоченному представителю Банка. Банк
          имеет право продолжить обработку моих персональных данных на основаниях, предусмотренных действующим
          законодательством РФ.<br>
          Банк имеет право вносить изменения в настоящее согласие. Новая редакция согласия вступает в силу с момента
          ее размещения, если иное не предусмотрено новой редакцией согласия.
        </p>
      </span>
    </div>
  </div>
</form>

</body>
</html>